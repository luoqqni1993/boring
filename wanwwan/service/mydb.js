var mydb=[
{"goodsId":1,"goodsName":"【小营】亮健容天土锅羊蝎子",
"goodsDesc":"仅售45元！价值78元的招牌八爷小吃1份，提供免费WiFi",
"currentprice":45,"price":79,"start":4.3,"classify":"美食",
"goodsImgList":
["http://p0.meituan.net/460.280/deal/03655cac8f99bf98faed2c7ad00f132447145.jpg@PC",
"http://p0.meituan.net/80.0.a/deal/03655cac8f99bf98faed2c7ad00f132447145.jpg@PC",
"http://p0.meituan.net/460.280/deal/89903f3284d09270ff8e58b5fec72c5b46401.jpg@PC_108_0_494_300a%7C388h_640w_2e_90Q"],
"distance":20,"location":"北京市海淀区五道口11号",
"goodsImg":"http://p0.meituan.net/460.280/deal/4347a11ca551f8eb12dfe8f22d550872181989.jpg@PC"},


{"goodsId":2,"goodsName":"【朝阳区】虾吃虾涮",
"goodsDesc":"仅售88元！价值100元的代金券1张，除酒水饮料、烧烤外全场通用",
"currentprice":88,"price":189,"start":4.6,"classify":"美食",
"goodsImgList":
["http://p1.meituan.net/460.280/deal/6b549cbed95db2f5972c351faff63624444235.jpg@PC",
"http://p1.meituan.net/460.280/deal/6b549cbed95db2f5972c351faff63624444235.jpg@PC"],
"distance":23,"location":"北京市海淀区五道口11号",
"goodsImg":"http://p1.meituan.net/460.280/deal/6b549cbed95db2f5972c351faff63624444235.jpg@PC"},

{"goodsId":3,"goodsName":"【五棵松】京瑞轩自助火锅海鲜烤肉",
"goodsDesc":"仅售48元！价值100元的代金券1张，除酒水饮料、烧烤外全场通用",
"currentprice":48,"price":189,"start":4.6,"classify":"美食",
"goodsImgList":
["http://p1.meituan.net/460.280/deal/4aa6f1ca10d12a1ad8f17a156f404e36145528.jpg@PC_0_31_1024_620a%7C388h_640w_2e_90Q",
"http://p0.meituan.net/460.280/deal/7315d84c4d2021234a8c6aaf2d32df83104034.jpg@PC_0_31_1024_620a%7C388h_640w_2e_90Q"],
"distance":40,"location":"五棵松",
"goodsImg":"http://p0.meituan.net/460.280/deal/be747c3c745a58a6b48d7739804de77d140051.jpg@PC_0_31_1024_620a%7C388h_640w_2e_90Q"},

{"goodsId":4,"goodsName":"【五棵松】 经济酒店",
"goodsDesc":"汉庭快捷酒店",
"currentprice":148,"price":389,"start":4.2,"classify":"酒店",
"goodsImgList":
["http://e.hiphotos.baidu.com/bainuo/wh=720,436/sign=99f8d2ff37adcbef016176019e9f02e9/8b13632762d0f703d8d57ee70efa513d2697c5a2.jpg",
"http://www.yitiangroup.com/upload/images/201515112444.jpg"],
"distance":42,"location":"五棵松",
"goodsImg":"http://img.redocn.com/201512/7/5340960_1449458836mu8o.jpg"},

{"goodsId":5,"goodsName":"【清华园】 七天快捷酒店",
"goodsDesc":"七天快捷酒店",
"currentprice":168,"price":389,"start":4.4,"classify":"酒店",
"goodsImgList":
["http://e.hiphotos.baidu.com/bainuo/wh=720,436/sign=99f8d2ff37adcbef016176019e9f02e9/8b13632762d0f703d8d57ee70efa513d2697c5a2.jpg",
"http://www.yitiangroup.com/upload/images/201515112444.jpg"],
"distance":12,"location":"清华园",
"goodsImg":"http://img.redocn.com/201512/7/5340960_1449458836mu8o.jpg"},

{"goodsId":6,"goodsName":"【回龙观】 万达国际酒店",
"goodsDesc":"万达国际酒店",
"currentprice":198,"price":399,"start":4.2,"classify":"酒店",
"goodsImgList":
["http://file29.mafengwo.net/M00/EC/A4/wKgBpVV-Q42ALopyAAgCmji_LGc40.jpeg",
"http://pic15.nipic.com/20110809/8100566_085352699000_2.jpg"],
"distance":14,"location":"回龙观",
"goodsImg":"http://exp.cdn-hotels.com/hotels/5000000/4560000/4559700/4559699/4559699_24_z.jpg"},

{"goodsId":7,"goodsName":"【回龙观】 龙城KTV",
"goodsDesc":"龙城KTV",
"currentprice":128,"price":399,"start":4.2,"classify":"KTV",
"goodsImgList":
["http://imgsrc.baidu.com/forum/w=580/sign=49dbf95b4a086e066aa83f4332097b5a/bfb339292df5e0fe6867ec6b5a6034a85fdf728d.jpg",
"http://pic1.xtuan.com/upload/casePictures/20140528/10552677154_w.jpg"],
"distance":14,"location":"回龙观",
"goodsImg":"http://img01.tobosu.net/sjsimages/Case/tj20137299341568117.png"},

{"goodsId":8,"goodsName":"【回龙观】 kitty KTV",
"goodsDesc":"kitty KTV",
"currentprice":228,"price":599,"start":4.2,"classify":"KTV",
"goodsImgList":
["http://imgsrc.baidu.com/forum/w=580/sign=49dbf95b4a086e066aa83f4332097b5a/bfb339292df5e0fe6867ec6b5a6034a85fdf728d.jpg",
"http://pic1.xtuan.com/upload/casePictures/20140528/10552677154_w.jpg"],
"distance":14,"location":"回龙观",
"goodsImg":"http://img01.tobosu.net/sjsimages/Case/tj20137299341568117.png"},

{"goodsId":9,"goodsName":"【回龙观】 天王巨星 KTV",
"goodsDesc":"天王巨星 KTV",
"currentprice":138,"price":299,"start":4.0,"classify":"KTV",
"goodsImgList":
["http://sem.g3img.com/g3img/jinmo2015/20150707110036_89977.jpg",
"http://pic.58pic.com/58pic/11/77/68/84B58PICxCj.jpg"],
"distance":14,"location":"回龙观",
"goodsImg":"http://hiphotos.baidu.com/lbsugc/pic/item/ac4bd11373f0820250e641434bfbfbedab641b51.jpg"},

{"goodsId":10,"goodsName":"【清河】 万达影城",
"goodsDesc":"万达影城",
"currentprice":68,"price":99,"start":4.0,"classify":"电影",
"goodsImgList":
["http://x.tuozhe8.com/attachment/forum/201506/04/100833om8y1uulmmko2fwo.jpg",
"http://img.yzmg.com/201508/20150818/2015081809505257.jpg"],
"distance":14,"location":"清河",
"goodsImg":"http://pic2.ooopic.com/12/55/70/27bOOOPIC6e_1024.jpg"},

{"goodsId":11,"goodsName":"【清河】 宝利影城",
"goodsDesc":"宝利影城",
"currentprice":58,"price":99,"start":4.0,"classify":"电影",
"goodsImgList":
["http://i2.s1.dpfile.com/2010-12-08/6088656_b.jpg%28700x700%29/thumb.jpg",
"http://pic41.nipic.com/20140513/2531170_224024497000_2.jpg"],
"distance":14,"location":"清河",
"goodsImg":"http://pic.qiantucdn.com/58pic/17/37/05/57Y58PICEGr_1024.jpg"}
];

var myNear=[
{"goodsId":26,"goodsName":"【望京】凤凰小厨",
"goodsDesc":"仅售35元！【望京】凤凰小厨",
"currentprice":35,"price":429,"start":4.3,"classify":"美食",
"goodsImgList":
["http://p1.meituan.net/460.280/deal/d3914f25228b1f2ff5a287ae83ed633e89701.jpg@PC_0_31_1029_623a%7C388h_640w_2e_90Q",
"http://p1.meituan.net/460.280/deal/1dd1151e80cb5d72b108d3b9f9ea791b86149.jpg@PC_0_31_1029_623a%7C388h_640w_2e_90Q"],
"distance":20,"location":"北京市朝阳区31号",
"goodsImg":
"http://p1.meituan.net/460.280/deal/49b695e15cd7cbeeafc6cbf43608769910997.jpg@PC_0_87_440_266a%7C388h_640w_2e_100q"},


{"goodsId":30,"goodsName":"【酒仙桥】潮州小弟潮汕牛肉火锅",
"goodsDesc":"酒仙桥",
"currentprice":248,"price":389,"start":4.2,"classify":"美食",
"goodsImgList":
["http://p1.meituan.net/460.280/deal/f04d6ba78390e7965b362ba2751191e178797.jpg@PC_0_49_700_424a%7C388h_640w_2e_90Q",
"http://p1.meituan.net/460.280/deal/f04d6ba78390e7965b362ba2751191e178797.jpg@PC_0_49_700_424a%7C388h_640w_2e_90Q"],
"distance":22,"location":"酒仙桥",
"goodsImg":"http://p1.meituan.net/460.280/deal/f04d6ba78390e7965b362ba2751191e178797.jpg@PC_0_49_700_424a%7C388h_640w_2e_90Q"},

{"goodsId":31,"goodsName":"【后海/什刹海】全聚德烤鸭店",
"goodsDesc":"全聚德烤鸭店",
"currentprice":198,"price":389,"start":4.4,"classify":"美食",
"goodsImgList":
["http://p1.meituan.net/460.280/deal/a0e54f5266c30690659be84a1e5e9b6a103780.jpg@PC_0_30_1000_606a%7C388h_640w_2e_90Q",
"http://p1.meituan.net/460.280/deal/e3c733c0bd1d04c5cfa85b69fabaa07b150868.jpg@PC_0_30_1000_606a%7C388h_640w_2e_90Q"],
"distance":12,"location":"后海",
"goodsImg":"http://p0.meituan.net/460.280/deal/7d2f48b1bdf94665879bb4d36384355f50979.jpg@PC_1_0_636_386a%7C388h_640w_2e_90Q"},

{"goodsId":34,"goodsName":"不理包子（前门店)",
"goodsDesc":"不理包子",
"currentprice":188,"price":199,"start":4.2,"classify":"美食",
"goodsImgList":
["http://p0.meituan.net/deal/201211/09/_1109143551.jpg",
"http://p0.meituan.net/deal/201211/09/_1109143551.jpg"],
"distance":24,"location":"不理包子",
"goodsImg":"http://p0.meituan.net/deal/201211/09/_1109143551.jpg"},

];

var userInfo=[
{userId:'ea109876',userName:'admin',password:'admin',role:'vip'},
{userId:'ea109877',userName:'demo',password:'demo',role:'vip'},
{userId:'ea109878',userName:'zhang',password:'zhang',role:'admin'},
{userId:'ea109879',userName:'fish',password:'fish',role:'admin'},
{userId:'ea109880',userName:'lisi',password:'',role:'lisi'},
{userId:'ea109881',userName:'15201506916',password:'123456',role:'15201506915'},

];
var _CODE='';
var dbApi={
	query:function(){
       return mydb;
	},
	search:function(id){
       var s=[];
	      for(var i=0;i<mydb.length;i++){
	         if(id.selectId==mydb[i].goodsId){
	           s.push(mydb[i]);
	         }
	      }
	   return s;
	},
	login:function(obj){
		var message={};
		console.log(obj);
		for(var i=0;i<userInfo.length;i++){
			console.log(obj.userName);
            if(obj.userName==userInfo[i].userName&&obj.passWord==userInfo[i].password){
                
                message.message=obj.userName+'login success';
                message.time='2016-11-21';
                message.role='admin';
                 message.status='1';
                return message;
           }
		}
		message.message='no this user';
                message.time='2016-11-21';
                message.status='0';
          return message;      
	},
	checkUser:function(obj){
		 var flag={};
	     for(var i=0;i<userInfo.length;i++){
             if(userInfo[i].userName==obj.userName){
             	flag.falg=true;
             	return flag;
             }
	     }
	     flag.flag=false;
	     return flag;
	},
	saveCode:function(_code){
        _CODE=_code;
	},
	checkCode:function(code){
		console.log(code);
		console.log(_CODE);
		var flag={};
        if(code==_CODE){
           flag.flag=true
           return flag;
        }else{
        	flag.flag=false
          return 	flag;
        }
	},
	near:function(){
       return myNear;
	},
	//分页底层api
	page:function(param){
		//1、当前页数
		var _index = parseInt(param.pageIndex);
		//2、当前显示数量
		var _size = parseInt(param.pageSize);
		//3、按照页数和页面显示数量  将数据提取出来

		var top = _index*_size;
		var bottom = (_index-1)*_size;

		return mydb.slice(bottom,top)
	},
	getDetail:function(param){
		var _id = parseInt(param.id);
		for(var i=0;i<mydb.length;i++){
			if(mydb[i].goodsId==_id){
				return mydb[i];
			}
		}
	}


}
module.exports=dbApi;















